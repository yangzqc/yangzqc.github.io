import{_ as B,r as a,g as M,h as S,i as A,j as v,k as F,c as o,o as l,l as I,a as r,v as k,F as f,b as _,t as T,n as D}from"./app-BiXBjROG.js";const j={class:"masonry-container"},N={class:"loading-container"},R={class:"error-overlay"},U={class:"error-list"},V={class:"masonry-grid"},$=["src","alt"],q=15,G=260,H={__name:"ImageMasonry",props:{images:{type:Array,default:()=>[]}},setup(x){const E=x;function L(t,e){let s;return function(...d){const h=()=>{clearTimeout(s),t(...d)};clearTimeout(s),s=setTimeout(h,e)}}const n=a(4),p=a(G),W=a(v?window.innerWidth:1200),m=a(!0),u=a([]),c=a(0),g=a(E.images),y=()=>{if(!v)return;const t=window.innerWidth;W.value=t,t>=1200?n.value=4:t>=900?n.value=3:t>=600?n.value=2:n.value=1;const e=t;p.value=(e-(n.value-1)*q)/n.value},b=M(()=>{const t=Array.from({length:n.value},()=>[]);return g.value.forEach((e,s)=>{const i=s%n.value;t[i].push(e)}),t}),C=t=>{const e=t.target;e.style.width="100%",e.style.height="auto",c.value++,c.value===g.value.length&&(m.value=!1)},z=t=>{const e=t.target;u.value.includes(e.alt)||u.value.push(e.alt),c.value++,c.value===g.value.length&&(m.value=!1)},w=L(()=>{y()},200);return S(()=>{y()}),A(()=>{v&&window.addEventListener("resize",w)}),F(()=>{v&&window.removeEventListener("resize",w)}),(t,e)=>(l(),o("div",j,[I(r("div",N,e[0]||(e[0]=[r("div",{class:"loading-spinner"},"正在加载中，请稍等...",-1)]),512),[[k,m.value]]),I(r("div",R,[e[1]||(e[1]=r("div",{class:"error-title"},"以下图片加载失败：",-1)),r("ul",U,[(l(!0),o(f,null,_(u.value,(s,i)=>(l(),o("li",{key:i},T(s),1))),128))])],512),[[k,u.value.length]]),r("div",V,[(l(!0),o(f,null,_(b.value,(s,i)=>(l(),o("div",{key:i,class:"masonry-column",style:D({width:`${p.value}px`})},[(l(!0),o(f,null,_(s,(d,h)=>(l(),o("div",{key:h,class:"masonry-item"},[r("img",{src:d.imageSrc,alt:d.imageAlt,onLoad:C,onError:z},null,40,$)]))),128))],4))),128))])]))}},K=B(H,[["__scopeId","data-v-94fd2b36"]]);export{K as I};
