import{_ as z,r as n,g as A,h as b,i as v,j as B,c as o,o as l,k as w,a as r,v as I,F as h,b as g,t as M,n as D}from"./app-BH95lK0b.js";const F={class:"masonry-container"},j={class:"loading-container"},q={class:"error-overlay"},N={class:"error-list"},R={class:"masonry-grid"},U=["src","alt"],V=15,$=260,G={__name:"ImageMasonry",props:{images:{type:Array,default:()=>[]}},setup(E){const k=E,a=n(4),f=n($),C=n(v?window.innerWidth:1200),u=n(!0),c=n([]),d=n(0),m=n(k.images),y=()=>{if(!v)return;const e=window.innerWidth;C.value=e,e>=1200?a.value=4:e>=900?a.value=3:e>=600?a.value=2:a.value=1;const t=e;f.value=(t-(a.value-1)*V)/a.value},L=A(()=>{const e=Array.from({length:a.value},()=>[]);return m.value.forEach((t,s)=>{const i=s%a.value;e[i].push(t)}),e}),W=e=>{const t=e.target;t.style.width="100%",t.style.height="auto",d.value++,d.value===m.value.length&&(u.value=!1)},x=e=>{const t=e.target;c.value.includes(t.alt)||c.value.push(t.alt),d.value++,d.value===m.value.length&&(u.value=!1)},p=()=>{y()};return b(()=>{if(y(),v){window.addEventListener("resize",p);const e=document.querySelectorAll(".masonry-item img");let t=0;e.forEach(s=>{s.complete&&(t++,s.style.width="100%",s.style.height="auto")}),t===e.length&&e.length>0&&(u.value=!1)}}),B(()=>{v&&window.removeEventListener("resize",p)}),(e,t)=>(l(),o("div",F,[w(r("div",j,t[0]||(t[0]=[r("div",{class:"loading-spinner"},"正在加载中，请稍等...",-1)]),512),[[I,u.value]]),w(r("div",q,[t[1]||(t[1]=r("div",{class:"error-title"},"以下图片加载失败：",-1)),r("ul",N,[(l(!0),o(h,null,g(c.value,(s,i)=>(l(),o("li",{key:i},M(s),1))),128))])],512),[[I,c.value.length]]),r("div",R,[(l(!0),o(h,null,g(L.value,(s,i)=>(l(),o("div",{key:i,class:"masonry-column",style:D({width:`${f.value}px`})},[(l(!0),o(h,null,g(s,(_,S)=>(l(),o("div",{key:S,class:"masonry-item"},[r("img",{src:_.imageSrc,alt:_.imageAlt,onLoad:W,onError:x},null,40,U)]))),128))],4))),128))])]))}},J=z(G,[["__scopeId","data-v-67960ea6"]]);export{J as I};
