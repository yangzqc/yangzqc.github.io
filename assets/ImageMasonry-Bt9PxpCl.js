import{_ as S,r as t,g as b,h as A,i as d,j as B,c as n,o,k as w,a as l,v as I,F as g,b as h,t as M,n as D}from"./app-T6l0Pm4B.js";const F={class:"masonry-container"},j={class:"loading-container"},N={class:"error-overlay"},R={class:"error-list"},U={class:"masonry-grid"},V=["src","alt"],$=15,q=260,G={__name:"ImageMasonry",props:{images:{type:Array,default:()=>[]}},setup(k){const E=k,a=t(4),f=t(q),L=t(d?window.innerWidth:1200),v=t(!0),u=t([]),c=t(0),m=t(E.images),_=()=>{if(!d)return;const s=window.innerWidth;L.value=s,s>=1200?a.value=4:s>=900?a.value=3:s>=600?a.value=2:a.value=1;const e=s;f.value=(e-(a.value-1)*$)/a.value},W=b(()=>{const s=Array.from({length:a.value},()=>[]);return m.value.forEach((e,r)=>{const i=r%a.value;s[i].push(e)}),s}),x=s=>{const e=s.target;e.style.width="100%",e.style.height="auto",c.value++,c.value===m.value.length&&(v.value=!1)},C=s=>{const e=s.target;u.value.includes(e.alt)||u.value.push(e.alt),c.value++,c.value===m.value.length&&(v.value=!1)},p=()=>{_()};return A(()=>{_(),d&&window.addEventListener("resize",p)}),B(()=>{d&&window.removeEventListener("resize",p)}),(s,e)=>(o(),n("div",F,[w(l("div",j,e[0]||(e[0]=[l("div",{class:"loading-spinner"},"正在加载中，请稍等...",-1)]),512),[[I,v.value]]),w(l("div",N,[e[1]||(e[1]=l("div",{class:"error-title"},"以下图片加载失败：",-1)),l("ul",R,[(o(!0),n(g,null,h(u.value,(r,i)=>(o(),n("li",{key:i},M(r),1))),128))])],512),[[I,u.value.length]]),l("div",U,[(o(!0),n(g,null,h(W.value,(r,i)=>(o(),n("div",{key:i,class:"masonry-column",style:D({width:`${f.value}px`})},[(o(!0),n(g,null,h(r,(y,z)=>(o(),n("div",{key:z,class:"masonry-item"},[l("img",{src:y.imageSrc,alt:y.imageAlt,onLoad:x,onError:C},null,40,V)]))),128))],4))),128))])]))}},J=S(G,[["__scopeId","data-v-2ff36a49"]]);export{J as I};
